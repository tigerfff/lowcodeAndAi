# AI è¾…åŠ©å¯è§†åŒ–ä½ä»£ç é¡µé¢ç”Ÿæˆå·¥å…· - å¼€å‘æ–‡æ¡£

## ğŸ“‹ ç›®å½•

- [1. é¡¹ç›®æ¦‚è¿°](#1-é¡¹ç›®æ¦‚è¿°)
- [2. æŠ€æœ¯æ¶æ„](#2-æŠ€æœ¯æ¶æ„)
- [3. æ ¸å¿ƒæ¦‚å¿µ](#3-æ ¸å¿ƒæ¦‚å¿µ)
- [4. æ¨¡å—è®¾è®¡](#4-æ¨¡å—è®¾è®¡)
- [5. æ•°æ®ç»“æ„](#5-æ•°æ®ç»“æ„)
- [6. æŠ€æœ¯å®ç°](#6-æŠ€æœ¯å®ç°)
- [7. å¼€å‘æŒ‡å—](#7-å¼€å‘æŒ‡å—)
- [8. API æ–‡æ¡£](#8-api-æ–‡æ¡£)

---

## 1. é¡¹ç›®æ¦‚è¿°

### 1.1 é¡¹ç›®å®šä½

AI è¾…åŠ©å¯è§†åŒ–ä½ä»£ç é¡µé¢ç”Ÿæˆå·¥å…·ï¼Œé€šè¿‡**å¯è§†åŒ–æ‹–æ‹½ + é…ç½® + AI ç”Ÿæˆ**çš„æ–¹å¼ï¼Œå¿«é€Ÿç”Ÿæˆé«˜ä¿çœŸçš„ Vue2 + hui ç»„ä»¶åº“é¡µé¢ä»£ç ã€‚

### 1.2 æ ¸å¿ƒç‰¹ç‚¹

- **å¯è§†åŒ–æ“ä½œ**ï¼šç±»ä½ä»£ç å¹³å°çš„ä¸‰æ å¸ƒå±€ï¼ˆç»„ä»¶åº“ + å®æ—¶é¢„è§ˆ + å±æ€§é…ç½®ï¼‰
- **çµæ´»å¸ƒå±€**ï¼šæ¨¡æ¿åªæä¾›å¸ƒå±€å®¹å™¨ï¼Œç”¨æˆ·è‡ªç”±ç»„è£…ç»„ä»¶
- **å¤šæ¥å£æ”¯æŒ**ï¼šä¸€ä¸ªç»„ä»¶å¯ç»‘å®šå¤šä¸ªæ¥å£ï¼ˆé€‰é¡¹æ¥å£ã€æäº¤æ¥å£ã€è”åŠ¨æ¥å£ç­‰ï¼‰
- **AI å¢å¼º**ï¼šé€šè¿‡æ˜ç¡®çš„é…ç½®å’Œæç¤ºè¯ï¼Œè®© AI ç”Ÿæˆè¿æ¥ä»£ç 
- **é«˜ä¿çœŸè¾“å‡º**ï¼šç”Ÿæˆå¯ç›´æ¥ä½¿ç”¨çš„ Vue2 SFC ä»£ç 

### 1.3 æŠ€æœ¯æ ˆ

**å‰ç«¯æ¡†æ¶**
- Vue3 (ä¸»åº”ç”¨)
- Vite (æ„å»ºå·¥å…·)
- Pinia (çŠ¶æ€ç®¡ç†)

**UI ç»„ä»¶åº“**
- Element Plus (ä¸»åº”ç”¨)
- hui (ç”Ÿæˆä»£ç çš„ç›®æ ‡ç»„ä»¶åº“)

**æ ·å¼æ–¹æ¡ˆ**
- TailwindCSS (ä¸»åº”ç”¨æ ·å¼)

**ä»£ç ç”Ÿæˆ**
- AI Provider (OpenAI/Anthropic/è‡ªå®šä¹‰)
- Handlebars (é™çº§æ¨¡æ¿å¼•æ“)
- Prettier (ä»£ç æ ¼å¼åŒ–)

**é¢„è§ˆéš”ç¦»**
- iframe (Vue2 è¿è¡Œç¯å¢ƒ)
- postMessage (è·¨çª—å£é€šä¿¡)

---

## 2. æŠ€æœ¯æ¶æ„

### 2.1 æ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ä¸»åº”ç”¨ (Vue3)                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  ç»„ä»¶å·¥å…·æ     â”‚   é¢„è§ˆç®¡ç†å™¨          â”‚   å±æ€§é…ç½®åŒº    â”‚ â”‚
â”‚  â”‚  Component    â”‚   PreviewManager     â”‚   Config Panel  â”‚ â”‚
â”‚  â”‚  Library      â”‚         â†“            â”‚                 â”‚ â”‚
â”‚  â”‚               â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚                 â”‚ â”‚
â”‚  â”‚               â”‚   â”‚   iframe     â”‚   â”‚                 â”‚ â”‚
â”‚  â”‚               â”‚   â”‚   (Vue2)     â”‚   â”‚                 â”‚ â”‚
â”‚  â”‚               â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚                 â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                            â†“                                â”‚
â”‚                    ConfigManager                            â”‚
â”‚                            â†“                                â”‚
â”‚                    CodeGenerator                            â”‚
â”‚                            â†“                                â”‚
â”‚                       AI Provider                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 ç›®å½•ç»“æ„

```
ai-code/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ views/
â”‚   â”‚   â””â”€â”€ Editor.vue                  # ä¸»ç¼–è¾‘å™¨é¡µé¢
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ ComponentLibrary.vue        # å·¦ä¾§ç»„ä»¶åº“
â”‚   â”‚   â”œâ”€â”€ PreviewPanel.vue            # ä¸­é—´é¢„è§ˆåŒº
â”‚   â”‚   â”œâ”€â”€ ConfigPanel.vue             # å³ä¾§é…ç½®åŒº
â”‚   â”‚   â”œâ”€â”€ ApiBindingEditor.vue        # æ¥å£ç»‘å®šç¼–è¾‘å™¨
â”‚   â”‚   â””â”€â”€ CodePreview.vue             # ä»£ç é¢„è§ˆå¯¹è¯æ¡†
â”‚   â”œâ”€â”€ stores/
â”‚   â”‚   â”œâ”€â”€ editorStore.js              # ç¼–è¾‘å™¨çŠ¶æ€ç®¡ç†
â”‚   â”‚   â””â”€â”€ configStore.js              # é…ç½®æ•°æ®ç®¡ç†
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ templateManager.js          # æ¨¡æ¿ç®¡ç†å™¨
â”‚   â”‚   â”œâ”€â”€ componentLibrary.js         # ç»„ä»¶åº“ç®¡ç†å™¨
â”‚   â”‚   â”œâ”€â”€ configManager.js            # é…ç½®ç®¡ç†å™¨
â”‚   â”‚   â”œâ”€â”€ previewManager.js           # é¢„è§ˆç®¡ç†å™¨
â”‚   â”‚   â”œâ”€â”€ codeGenerator.js            # ä»£ç ç”Ÿæˆå™¨
â”‚   â”‚   â””â”€â”€ aiProvider.js               # AI ä¾›åº”å•†é€‚é…å™¨
â”‚   â””â”€â”€ utils/
â”‚       â”œâ”€â”€ dragAndDrop.js              # æ‹–æ‹½å·¥å…·
â”‚       â””â”€â”€ validators.js               # æ ¡éªŒå·¥å…·
â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ preview-iframe.html             # é¢„è§ˆ iframe é¡µé¢
â”‚   â”œâ”€â”€ hui-pro/                        # hui-pro ç»„ä»¶æºç 
â”‚   â””â”€â”€ hui2.43.2/                      # hui ç»„ä»¶åº“
â”œâ”€â”€ templates/
â”‚   â”œâ”€â”€ standard-list/                  # æ ‡å‡†åˆ—è¡¨é¡µæ¨¡æ¿
â”‚   â”œâ”€â”€ left-tree-right-table/          # å·¦æ ‘å³è¡¨æ¨¡æ¿
â”‚   â””â”€â”€ top-tab-bottom-list/            # é¡¶éƒ¨Tabåˆ—è¡¨æ¨¡æ¿
â”œâ”€â”€ manifests/
â”‚   â”œâ”€â”€ hui-components.json             # hui ç»„ä»¶å…ƒæ•°æ®
â”‚   â””â”€â”€ templates.json                  # æ¨¡æ¿æ¸…å•
â””â”€â”€ config/
    â””â”€â”€ ai.example.json                 # AI é…ç½®ç¤ºä¾‹
```

---

## 3. æ ¸å¿ƒæ¦‚å¿µ

### 3.1 æ¨¡æ¿ (Template)

**å®šä¹‰**ï¼šæ¨¡æ¿æ˜¯ hui-pro é¡µé¢å¸ƒå±€ç»„ä»¶çš„ç»„åˆï¼Œå®šä¹‰äº†é¡µé¢çš„æ•´ä½“ç»“æ„å’Œäº¤äº’é€»è¾‘ã€‚

**æ ¸å¿ƒå¸ƒå±€ç»„ä»¶**ï¼š

**1. h-page-container**ï¼ˆæœ€å¤–å±‚å®¹å™¨ï¼‰
- **åŠŸèƒ½**ï¼šé¡µé¢æœ€å¤–å±‚å®¹å™¨ï¼Œæä¾›å…¨å±€ä¸Šä¸‹æ–‡
- **Slots**ï¼š
  - `pageHeader`ï¼šé¡µé¢å¤´éƒ¨æ’æ§½ï¼ˆæ”¾ç½® h-page-headerï¼‰
  - `default`ï¼šä¸»å†…å®¹æ’æ§½ï¼ˆæ”¾ç½® h-page-contentï¼‰
- **ç‰¹æ€§**ï¼š
  - ç›‘å¬é¡µé¢æ»šåŠ¨
  - æä¾› pageContainer ä¸Šä¸‹æ–‡ç»™å­ç»„ä»¶
  - æ”¯æŒå¤´éƒ¨å›ºå®šæ¨¡å¼ï¼ˆheaderAffixï¼‰

**2. h-page-header**ï¼ˆé¡µé¢å¤´éƒ¨ï¼‰
- **åŠŸèƒ½**ï¼šé¡µé¢å¤´éƒ¨ï¼ŒåŒ…å«é¢åŒ…å±‘ã€æ ‡é¢˜ã€æ“ä½œæŒ‰é’®
- **Props**ï¼š
  - `affix`ï¼šæ˜¯å¦å›ºå®šåœ¨é¡¶éƒ¨
  - `breadcrumb`ï¼šé¢åŒ…å±‘æ•°ç»„
  - `title`ï¼šé¡µé¢æ ‡é¢˜
  - `subtitle`ï¼šé¡µé¢å‰¯æ ‡é¢˜
  - `returnIcon`ï¼šæ˜¯å¦æ˜¾ç¤ºè¿”å›æŒ‰é’®
- **Slots**ï¼š
  - `pageHeaderAction`ï¼šå³ä¾§æ“ä½œæŒ‰é’®åŒºåŸŸ
- **ç‰¹æ€§**ï¼š
  - é¢åŒ…å±‘è‡ªåŠ¨æŠ˜å ï¼ˆå½“ç©ºé—´ä¸è¶³æ—¶ï¼‰
  - æ”¯æŒå›ºå®šæ¨¡å¼ï¼Œæ»šåŠ¨æ—¶å¸é¡¶

**3. h-page-content**ï¼ˆå†…å®¹åŒºåŸŸï¼‰
- **åŠŸèƒ½**ï¼šä¸»å†…å®¹åŒºåŸŸå®¹å™¨
- **Props**ï¼š
  - `flex`ï¼šæ˜¯å¦ä½¿ç”¨ flex å¸ƒå±€
  - `direction`ï¼šflex æ–¹å‘ï¼ˆvertical/horizontalï¼‰
  - `alignCenter`ï¼šæ˜¯å¦æ°´å¹³å±…ä¸­
- **Slots**ï¼š
  - `default`ï¼šå†…å®¹æ’æ§½ï¼ˆæ”¾ç½®æœç´¢åŒºã€è¡¨æ ¼åŒºç­‰ï¼‰
- **ç‰¹æ€§**ï¼š
  - è‡ªåŠ¨å“åº”å¼å¸ƒå±€
  - æä¾› pageContent ä¸Šä¸‹æ–‡ç»™å­ç»„ä»¶

**4. h-page-search**ï¼ˆæœç´¢åŒºåŸŸï¼‰
- **åŠŸèƒ½**ï¼šæœç´¢æ å®¹å™¨ï¼Œè‡ªé€‚åº”æ …æ ¼å¸ƒå±€
- **Props**ï¼š
  - `model`ï¼šè¡¨å•æ•°æ®å¯¹è±¡
  - `rules`ï¼šè¡¨å•æ ¡éªŒè§„åˆ™
  - `labelPosition`ï¼šæ ‡ç­¾ä½ç½®ï¼ˆé»˜è®¤ 'top'ï¼‰
- **Slots**ï¼š
  - `default`ï¼šæœç´¢é¡¹æ’æ§½ï¼ˆæ”¾ç½® h-page-search-itemï¼‰
  - `pageSearchAction`ï¼šæ“ä½œæŒ‰é’®åŒºåŸŸï¼ˆæŸ¥è¯¢ã€é‡ç½®ç­‰ï¼‰
- **ç‰¹æ€§**ï¼š
  - **è‡ªåŠ¨å“åº”å¼**ï¼šæ ¹æ®å±å¹•å®½åº¦è‡ªåŠ¨è°ƒæ•´ä¸º 1/2/3/4/6 åˆ—
  - **é«˜ä½é¢‘æœç´¢**ï¼šè‡ªåŠ¨è¯†åˆ« show å±æ€§ï¼Œæä¾›å±•å¼€/æ”¶èµ·åŠŸèƒ½
  - è‡ªåŠ¨è®¡ç®—æ“ä½œæŒ‰é’®ä½ç½®

**5. h-page-search-item**ï¼ˆæœç´¢é¡¹å®¹å™¨ï¼‰
- **åŠŸèƒ½**ï¼šåŒ…è£¹å•ä¸ªæœç´¢ç»„ä»¶
- **Props**ï¼š
  - `prop`ï¼šè¡¨å•å­—æ®µå
  - `label`ï¼šå­—æ®µæ ‡ç­¾
  - `show`ï¼šæ˜¯å¦é»˜è®¤æ˜¾ç¤ºï¼ˆç”¨äºé«˜ä½é¢‘ï¼‰
  - `hidden`ï¼šæ˜¯å¦éšè—
- **Slots**ï¼š
  - `default`ï¼šæ”¾ç½®å…·ä½“çš„è¡¨å•ç»„ä»¶ï¼ˆel-inputã€el-select ç­‰ï¼‰

**6. h-page-table**ï¼ˆè¡¨æ ¼åŒºåŸŸï¼‰
- **åŠŸèƒ½**ï¼šè¡¨æ ¼å®¹å™¨ï¼Œæ”¯æŒå¤šç§å›ºå®šæ¨¡å¼
- **Props**ï¼š
  - `full`ï¼šæ˜¯å¦å æ»¡å‰©ä½™ç©ºé—´
  - `border`ï¼šæ˜¯å¦æ˜¾ç¤ºå·¦å³è¾¹æ¡†
  - `headerAffix`ï¼šè¡¨å¤´æ˜¯å¦å›ºå®šï¼ˆé»˜è®¤ trueï¼‰
  - `scrollbarAffix`ï¼šæ»šåŠ¨æ¡æ˜¯å¦å›ºå®šï¼ˆé»˜è®¤ trueï¼‰
  - `paginationAffix`ï¼šåˆ†é¡µå™¨æ˜¯å¦å›ºå®šï¼ˆé»˜è®¤ trueï¼‰
- **Slots**ï¼š
  - `default`ï¼šè¡¨æ ¼æ’æ§½ï¼ˆæ”¾ç½® el-tableï¼‰
  - `pagination`ï¼šåˆ†é¡µå™¨æ’æ§½ï¼ˆæ”¾ç½® el-paginationï¼‰
- **ç‰¹æ€§**ï¼š
  - **è¡¨å¤´å›ºå®š**ï¼šæ»šåŠ¨æ—¶è¡¨å¤´è‡ªåŠ¨å¸é¡¶
  - **æ»šåŠ¨æ¡å›ºå®š**ï¼šæ»šåŠ¨æ¡å›ºå®šåœ¨åº•éƒ¨
  - **åˆ†é¡µå™¨å›ºå®š**ï¼šåˆ†é¡µå™¨å›ºå®šåœ¨åº•éƒ¨
  - è‡ªåŠ¨å¤„ç†å¤šç§åœºæ™¯çš„æ»šåŠ¨å’Œå›ºå®š

**æ¨¡æ¿ç‰¹ç‚¹**ï¼š
- âœ… **æ™ºèƒ½å¸ƒå±€**ï¼šç»„ä»¶è‡ªå¸¦å“åº”å¼å’Œäº¤äº’é€»è¾‘
- âœ… **å¤šå±‚ Slot**ï¼šæä¾›çµæ´»çš„å†…å®¹æ’æ§½
- âœ… **æ— éœ€æ‰‹åŠ¨é…ç½®**ï¼šè‡ªåŠ¨å¤„ç†æ»šåŠ¨ã€å›ºå®šã€å“åº”å¼ç­‰
- âœ… **ä¸Šä¸‹æ–‡ä¼ é€’**ï¼šé€šè¿‡ provide/inject å…±äº«çŠ¶æ€

### 3.2 ç»„ä»¶ (Component)

**å®šä¹‰**ï¼šç”¨æˆ·ä»ç»„ä»¶åº“æ‹–æ‹½åˆ°æ¨¡æ¿ slot ä¸­çš„ UI ç»„ä»¶ã€‚

**åˆ†ç±»**ï¼š
- **æœç´¢ç»„ä»¶**ï¼š`el-input`ã€`el-select`ã€`el-date-picker` ç­‰
- **è¡¨æ ¼ç»„ä»¶**ï¼š`el-table-column`
- **æ“ä½œç»„ä»¶**ï¼š`el-button`ã€`button-group`
- **è‡ªå®šä¹‰ç»„ä»¶**ï¼šä¸šåŠ¡è‡ªå®šä¹‰ç»„ä»¶

**é…ç½®**ï¼š
- åŸºç¡€å±æ€§ï¼ˆlabelã€placeholderã€clearable ç­‰ï¼‰
- æ¥å£ç»‘å®šï¼ˆå¯ç»‘å®šå¤šä¸ªæ¥å£ï¼‰
- AI æç¤ºè¯ï¼ˆå¯é€‰ï¼‰

### 3.3 æ¥å£ç»‘å®š (API Binding)

**å®šä¹‰**ï¼šç»„ä»¶ä¸åç«¯æ¥å£çš„å…³è”å…³ç³»ã€‚

**ç±»å‹**ï¼š
- **é€‰é¡¹æ¥å£**ï¼šç”¨äºå¡«å……ä¸‹æ‹‰æ¡†ã€çº§è”é€‰æ‹©å™¨çš„é€‰é¡¹æ•°æ®
- **æäº¤æ¥å£**ï¼šç”¨äºè¡¨å•æäº¤ã€æœç´¢æŸ¥è¯¢
- **è”åŠ¨æ¥å£**ï¼šç»„ä»¶å€¼å˜åŒ–æ—¶è§¦å‘çš„æ¥å£
- **æ“ä½œæ¥å£**ï¼šæŒ‰é’®ç‚¹å‡»æ—¶è°ƒç”¨çš„æ¥å£

**é…ç½®**ï¼š
- URLã€Method
- è§¦å‘æ—¶æœºï¼ˆonMountedã€watchã€click ç­‰ï¼‰
- æ•°æ®è·¯å¾„ã€å­—æ®µæ˜ å°„
- ä¾èµ–å‚æ•°

### 3.4 AI æç¤ºè¯ (AI Prompt)

**å®šä¹‰**ï¼šç”¨æˆ·ç»™ AI çš„é¢å¤–è¯´æ˜ï¼Œå¸®åŠ© AI ç†è§£ä¸šåŠ¡é€»è¾‘ã€‚

**å±‚çº§**ï¼š
- **ç»„ä»¶çº§**ï¼šé’ˆå¯¹å•ä¸ªç»„ä»¶çš„æç¤º
- **å…¨å±€çº§**ï¼šé’ˆå¯¹æ•´ä¸ªé¡µé¢çš„æç¤º

**ä½œç”¨**ï¼š
- è¯´æ˜ç»„ä»¶é—´çš„ä¾èµ–å…³ç³»
- è¯´æ˜æ•°æ®è½¬æ¢è§„åˆ™
- è¯´æ˜ç‰¹æ®Šä¸šåŠ¡é€»è¾‘

---

## 4. æ¨¡å—è®¾è®¡

### 4.1 TemplateManagerï¼ˆæ¨¡æ¿ç®¡ç†å™¨ï¼‰

**èŒè´£**ï¼šç®¡ç†é¡µé¢æ¨¡æ¿çš„åŠ è½½ã€è§£æå’Œæ¸²æŸ“ã€‚

**æ ¸å¿ƒæ–¹æ³•**ï¼š

```javascript
class TemplateManager {
  /**
   * åŠ è½½æ‰€æœ‰å¯ç”¨æ¨¡æ¿
   * @returns {Promise<Array>} æ¨¡æ¿åˆ—è¡¨
   */
  async loadTemplates()

  /**
   * è·å–æŒ‡å®šæ¨¡æ¿çš„è¯¦ç»†ä¿¡æ¯
   * @param {string} templateId - æ¨¡æ¿ID
   * @returns {Promise<Object>} æ¨¡æ¿é…ç½®
   */
  async getTemplate(templateId)

  /**
   * è§£ææ¨¡æ¿ç»“æ„ï¼Œæå– slot ä¿¡æ¯
   * @param {Object} template - æ¨¡æ¿é…ç½®
   * @returns {Object} slot ç»“æ„
   */
  parseTemplateSlots(template)

  /**
   * æ¸²æŸ“æ¨¡æ¿åˆ° iframe
   * @param {Object} template - æ¨¡æ¿é…ç½®
   * @param {Array} components - ç»„ä»¶åˆ—è¡¨
   */
  renderTemplate(template, components)
}
```

**æ•°æ®ç»“æ„**ï¼š

```javascript
{
  id: 'standard-list',
  name: 'æ ‡å‡†åˆ—è¡¨é¡µ',
  description: 'åŒ…å«æœç´¢åŒºã€è¡¨æ ¼åŒºã€åˆ†é¡µå™¨çš„æ ‡å‡†åˆ—è¡¨é¡µ',
  structure: {
    root: 'h-page-container',
    slots: {
      pageHeader: {
        component: 'h-page-header',
        slots: { default: 'breadcrumb' }
      },
      default: {
        component: 'h-page-content',
        slots: {
          pageSearch: {
            component: 'h-page-search',
            slots: {
              default: [], // ç”¨æˆ·æ‹–å…¥çš„ç»„ä»¶
              pageSearchAction: 'search-buttons'
            }
          },
          default: {
            component: 'h-page-table',
            slots: { default: [] }
          }
        }
      }
    }
  }
}
```

### 4.2 ComponentLibraryï¼ˆç»„ä»¶åº“ç®¡ç†å™¨ï¼‰

**èŒè´£**ï¼šç®¡ç†å¯ç”¨ç»„ä»¶çš„åŠ è½½ã€åˆ†ç±»å’Œå…ƒæ•°æ®ã€‚

**æ ¸å¿ƒæ–¹æ³•**ï¼š

```javascript
class ComponentLibrary {
  /**
   * åŠ è½½ hui ç»„ä»¶å…ƒæ•°æ®
   * @returns {Promise<Array>} ç»„ä»¶åˆ—è¡¨
   */
  async loadComponents()

  /**
   * æŒ‰åˆ†ç±»è·å–ç»„ä»¶
   * @param {string} category - åˆ†ç±»åç§°
   * @returns {Array} ç»„ä»¶åˆ—è¡¨
   */
  getComponentsByCategory(category)

  /**
   * è·å–ç»„ä»¶çš„é…ç½® Schema
   * @param {string} componentName - ç»„ä»¶åç§°
   * @returns {Object} é…ç½® Schema
   */
  getComponentSchema(componentName)

  /**
   * æ³¨å†Œè‡ªå®šä¹‰ç»„ä»¶
   * @param {Object} component - ç»„ä»¶é…ç½®
   */
  registerCustomComponent(component)
}
```

### 4.3 ConfigManagerï¼ˆé…ç½®ç®¡ç†å™¨ï¼‰

**èŒè´£**ï¼šç®¡ç†ç”¨æˆ·çš„é…ç½®æ•°æ®ï¼ˆç»„ä»¶ã€æ¥å£ã€æç¤ºè¯ç­‰ï¼‰ã€‚

**æ ¸å¿ƒæ–¹æ³•**ï¼š

```javascript
class ConfigManager {
  /**
   * æ·»åŠ ç»„ä»¶åˆ°é…ç½®
   * @param {string} slotPath - slot è·¯å¾„
   * @param {Object} component - ç»„ä»¶é…ç½®
   * @returns {string} ç»„ä»¶ID
   */
  addComponent(slotPath, component)

  /**
   * æ›´æ–°ç»„ä»¶é…ç½®
   * @param {string} componentId - ç»„ä»¶ID
   * @param {Object} config - æ–°é…ç½®
   */
  updateComponent(componentId, config)

  /**
   * åˆ é™¤ç»„ä»¶
   * @param {string} componentId - ç»„ä»¶ID
   */
  removeComponent(componentId)

  /**
   * æ·»åŠ æ¥å£ç»‘å®š
   * @param {string} componentId - ç»„ä»¶ID
   * @param {Object} apiBinding - æ¥å£é…ç½®
   * @returns {string} æ¥å£ç»‘å®šID
   */
  addApiBinding(componentId, apiBinding)

  /**
   * æ›´æ–°æ¥å£ç»‘å®š
   * @param {string} bindingId - æ¥å£ç»‘å®šID
   * @param {Object} config - æ–°é…ç½®
   */
  updateApiBinding(bindingId, config)

  /**
   * åˆ é™¤æ¥å£ç»‘å®š
   * @param {string} bindingId - æ¥å£ç»‘å®šID
   */
  removeApiBinding(bindingId)

  /**
   * å¯¼å‡ºå®Œæ•´é…ç½®
   * @returns {Object} å®Œæ•´é…ç½® JSON
   */
  exportConfig()

  /**
   * å¯¼å…¥é…ç½®
   * @param {Object} config - é…ç½® JSON
   */
  importConfig(config)
}
```

### 4.4 PreviewManagerï¼ˆé¢„è§ˆç®¡ç†å™¨ï¼‰

**èŒè´£**ï¼šç®¡ç† iframe é¢„è§ˆçš„æ¸²æŸ“å’Œäº¤äº’ã€‚

**æ ¸å¿ƒæ–¹æ³•**ï¼š

```javascript
class PreviewManager {
  /**
   * åˆå§‹åŒ– iframe
   * @param {HTMLElement} container - iframe å®¹å™¨
   */
  initIframe(container)

  /**
   * æ›´æ–°é¢„è§ˆ
   * @param {Object} config - å®Œæ•´é…ç½®
   */
  updatePreview(config)

  /**
   * åŒæ­¥é…ç½®åˆ° iframe
   * @param {Object} config - é…ç½®æ•°æ®
   */
  syncConfig(config)

  /**
   * å¤„ç†ç»„ä»¶é€‰ä¸­äº‹ä»¶
   * @param {string} componentId - ç»„ä»¶ID
   */
  handleSelection(componentId)

  /**
   * é«˜äº®æ˜¾ç¤º slot åŒºåŸŸ
   * @param {string} slotPath - slot è·¯å¾„
   */
  highlightSlot(slotPath)

  /**
   * å¤„ç†æ‹–æ‹½æ”¾ç½®
   * @param {Object} component - ç»„ä»¶æ•°æ®
   * @param {string} slotPath - slot è·¯å¾„
   */
  handleDrop(component, slotPath)
}
```

### 4.5 CodeGeneratorï¼ˆä»£ç ç”Ÿæˆå™¨ï¼‰

**èŒè´£**ï¼šåŸºäºé…ç½®ç”Ÿæˆ Vue2 SFC ä»£ç ã€‚

**æ ¸å¿ƒæ–¹æ³•**ï¼š

```javascript
class CodeGenerator {
  /**
   * æ„é€  AI Prompt
   * @param {Object} config - å®Œæ•´é…ç½®
   * @returns {string} Prompt æ–‡æœ¬
   */
  buildPrompt(config)

  /**
   * è°ƒç”¨ AI ç”Ÿæˆä»£ç 
   * @param {Object} config - å®Œæ•´é…ç½®
   * @returns {Promise<string>} ç”Ÿæˆçš„ä»£ç 
   */
  async generateCode(config)

  /**
   * æ ¡éªŒç”Ÿæˆçš„ä»£ç 
   * @param {string} code - ä»£ç æ–‡æœ¬
   * @returns {Object} æ ¡éªŒç»“æœ
   */
  validateCode(code)

  /**
   * æ ¼å¼åŒ–ä»£ç 
   * @param {string} code - ä»£ç æ–‡æœ¬
   * @returns {string} æ ¼å¼åŒ–åçš„ä»£ç 
   */
  formatCode(code)

  /**
   * é™çº§åˆ°æ¨¡æ¿æ¸²æŸ“ï¼ˆAI å¤±è´¥æ—¶ï¼‰
   * @param {Object} config - å®Œæ•´é…ç½®
   * @returns {string} ç”Ÿæˆçš„ä»£ç 
   */
  fallbackToTemplate(config)
}
```

---

## 5. æ•°æ®ç»“æ„

### 5.1 å®Œæ•´é…ç½®ç»“æ„

```javascript
{
  "version": "1.0",
  
  // é¡µé¢ä¿¡æ¯
  "pageInfo": {
    "name": "UserManagement",
    "title": "ç”¨æˆ·ç®¡ç†",
    "breadcrumb": ["é¦–é¡µ", "ç³»ç»Ÿç®¡ç†", "ç”¨æˆ·ç®¡ç†"]
  },
  
  // æ¨¡æ¿é…ç½®
  "template": {
    "id": "standard-list",
    "name": "æ ‡å‡†åˆ—è¡¨é¡µ"
  },
  
  // ç»„ä»¶é…ç½®
  "components": {
    // æœç´¢åŒºç»„ä»¶
    "searchArea": [
      {
        "id": "comp_001",
        "slot": "h-page-search.default",
        "component": "el-input",
        "wrapper": "h-page-search-item",
        "order": 1,
        "props": {
          "prop": "userName",
          "label": "ç”¨æˆ·å",
          "placeholder": "è¯·è¾“å…¥ç”¨æˆ·å",
          "clearable": true
        },
        "apiBindings": [
          {
            "id": "api_001",
            "purpose": "submit",
            "paramName": "userName",
            "defaultValue": ""
          }
        ],
        "aiPrompt": null
      }
    ],
    
    // è¡¨æ ¼é…ç½®
    "tableArea": {
      "id": "comp_table",
      "component": "el-table",
      "props": { "stripe": true },
      "apiBindings": [
        {
          "id": "api_main",
          "purpose": "main-data",
          "url": "/api/users",
          "method": "POST",
          "dataPath": "data.rows",
          "totalPath": "data.total"
        }
      ],
      "columns": [
        {
          "prop": "userId",
          "label": "ç”¨æˆ·ID",
          "width": "80",
          "type": "text"
        }
      ]
    }
  },
  
  // å…¨å±€ AI æç¤ºè¯
  "globalAiPrompt": "è¿™æ˜¯ä¸€ä¸ªç”¨æˆ·ç®¡ç†é¡µé¢..."
}
```

### 5.2 ç»„ä»¶é…ç½®ç»“æ„

```javascript
{
  "id": "comp_002",                    // ç»„ä»¶å”¯ä¸€ID
  "slot": "h-page-search.default",     // æ‰€å± slot
  "component": "el-select",            // ç»„ä»¶åç§°
  "wrapper": "h-page-search-item",     // åŒ…è£¹ç»„ä»¶
  "order": 2,                          // æ’åº
  
  // ç»„ä»¶å±æ€§
  "props": {
    "prop": "status",
    "label": "çŠ¶æ€",
    "placeholder": "è¯·é€‰æ‹©çŠ¶æ€",
    "clearable": true,
    "filterable": true
  },
  
  // æ¥å£ç»‘å®šï¼ˆå¯å¤šä¸ªï¼‰
  "apiBindings": [
    {
      "id": "api_002",
      "purpose": "options",           // æ¥å£ç”¨é€”
      "url": "/api/status-options",
      "method": "GET",
      "trigger": "onMounted",         // è§¦å‘æ—¶æœº
      "dataPath": "data.items",
      "mapping": {
        "label": "statusName",
        "value": "statusCode"
      }
    },
    {
      "id": "api_003",
      "purpose": "submit",
      "paramName": "status",
      "defaultValue": ""
    }
  ],
  
  // AI æç¤ºè¯
  "aiPrompt": "çŠ¶æ€å­—æ®µè¯´æ˜..."
}
```

### 5.3 æ¥å£ç»‘å®šç»“æ„

```javascript
{
  "id": "api_004",
  "purpose": "options",              // options | submit | action | cascade
  
  // æ¥å£ä¿¡æ¯
  "url": "/api/organizations",
  "method": "GET",
  
  // è§¦å‘é…ç½®
  "trigger": "watch:teamId",         // onMounted | watch:field | click | change
  "params": ["teamId"],              // ä¾èµ–å‚æ•°
  
  // æ•°æ®æ˜ å°„
  "dataPath": "data.items",
  "mapping": {
    "label": "orgName",
    "value": "orgId"
  },
  
  // å…¶ä»–é…ç½®
  "cache": false,                    // æ˜¯å¦ç¼“å­˜
  "transform": null                  // æ•°æ®è½¬æ¢å‡½æ•°
}
```

---

## 6. æŠ€æœ¯å®ç°

### 6.1 iframe é€šä¿¡æœºåˆ¶

**ä¸»åº”ç”¨ â†’ iframe**

```javascript
// ä¸»åº”ç”¨
function updatePreview(config) {
  const iframe = document.getElementById('preview-iframe')
  iframe.contentWindow.postMessage({
    type: 'update-preview',
    config: config
  }, '*')
}
```

**iframe â†’ ä¸»åº”ç”¨**

```javascript
// iframe å†…éƒ¨
function selectComponent(componentId) {
  parent.postMessage({
    type: 'select-component',
    componentId: componentId
  }, '*')
}
```

**æ¶ˆæ¯ç›‘å¬**

```javascript
// ä¸»åº”ç”¨
window.addEventListener('message', (event) => {
  switch (event.data.type) {
    case 'select-component':
      handleComponentSelect(event.data.componentId)
      break
    case 'drop-component':
      handleComponentDrop(event.data)
      break
  }
})
```

### 6.2 æ‹–æ‹½å®ç°

**ä½¿ç”¨ HTML5 Drag and Drop API**

```javascript
// ç»„ä»¶åº“ï¼ˆæ‹–æ‹½æºï¼‰
<div 
  v-for="comp in components" 
  :key="comp.name"
  draggable="true"
  @dragstart="onDragStart(comp)"
>
  {{ comp.label }}
</div>

function onDragStart(comp) {
  event.dataTransfer.effectAllowed = 'copy'
  event.dataTransfer.setData('component', JSON.stringify(comp))
}
```

```javascript
// iframe ä¸­çš„ slotï¼ˆæ”¾ç½®ç›®æ ‡ï¼‰
<div 
  class="slot-drop-zone"
  @dragover.prevent="onDragOver"
  @drop="onDrop"
>
  æ‹–æ‹½ç»„ä»¶åˆ°è¿™é‡Œ
</div>

function onDrop(event) {
  event.preventDefault()
  const comp = JSON.parse(event.dataTransfer.getData('component'))
  
  // é€šçŸ¥ä¸»åº”ç”¨
  parent.postMessage({
    type: 'drop-component',
    component: comp,
    slotPath: 'h-page-search.default'
  }, '*')
}
```

### 6.3 å“åº”å¼é…ç½®åŒæ­¥

**ä½¿ç”¨ Pinia Store**

```javascript
// editorStore.js
import { defineStore } from 'pinia'

export const useEditorStore = defineStore('editor', {
  state: () => ({
    selectedTemplate: null,
    components: {},
    selectedComponentId: null
  }),
  
  actions: {
    addComponent(slotPath, component) {
      const id = generateId()
      const config = {
        id,
        slot: slotPath,
        ...component
      }
      
      if (!this.components[slotPath]) {
        this.components[slotPath] = []
      }
      this.components[slotPath].push(config)
      
      // è§¦å‘é¢„è§ˆæ›´æ–°
      this.notifyPreviewUpdate()
      
      return id
    },
    
    updateComponent(componentId, config) {
      // æŸ¥æ‰¾ç»„ä»¶
      for (const slotPath in this.components) {
        const index = this.components[slotPath].findIndex(c => c.id === componentId)
        if (index !== -1) {
          Object.assign(this.components[slotPath][index], config)
          this.notifyPreviewUpdate()
          break
        }
      }
    },
    
    notifyPreviewUpdate() {
      // é€šçŸ¥ PreviewManager æ›´æ–°
      previewManager.updatePreview({
        template: this.selectedTemplate,
        components: this.components
      })
    }
  }
})
```

### 6.4 AI Prompt æ„é€ 

**Prompt æ¨¡æ¿**

```javascript
function buildPrompt(config) {
  const { pageInfo, template, components, globalAiPrompt } = config
  
  let prompt = `ä½ æ˜¯ä¸€ä¸ª Vue2 + hui ç»„ä»¶åº“çš„ä»£ç ç”Ÿæˆä¸“å®¶ã€‚\n\n`
  
  // é¡µé¢ä¿¡æ¯
  prompt += `## é¡µé¢ä¿¡æ¯\n`
  prompt += `- é¡µé¢åç§°: ${pageInfo.name}\n`
  prompt += `- é¢åŒ…å±‘: ${pageInfo.breadcrumb.join(' > ')}\n\n`
  
  // æ¨¡æ¿ç»“æ„
  prompt += `## æ¨¡æ¿ç»“æ„\n`
  prompt += `ä½¿ç”¨ ${template.name} æ¨¡æ¿\n\n`
  
  // æœç´¢åŒºç»„ä»¶
  prompt += `## æœç´¢åŒºç»„ä»¶ (å…±${components.searchArea.length}ä¸ª)\n\n`
  components.searchArea.forEach((comp, index) => {
    prompt += `### ç»„ä»¶${index + 1}: ${comp.component} (${comp.props.label})\n`
    prompt += `- è¡¨å•å­—æ®µ: ${comp.props.prop}\n`
    prompt += `- ç»„ä»¶å±æ€§: ${JSON.stringify(comp.props)}\n\n`
    
    prompt += `æ¥å£ç»‘å®š:\n`
    comp.apiBindings.forEach(api => {
      if (api.purpose === 'options') {
        prompt += `  - é€‰é¡¹æ¥å£: ${api.url}\n`
        prompt += `    è§¦å‘æ—¶æœº: ${api.trigger}\n`
        prompt += `    æ•°æ®è·¯å¾„: ${api.dataPath}\n`
      } else if (api.purpose === 'submit') {
        prompt += `  - æäº¤å‚æ•°: ${api.paramName}\n`
      }
    })
    
    if (comp.aiPrompt) {
      prompt += `\nAIæç¤º: ${comp.aiPrompt}\n`
    }
    prompt += `\n`
  })
  
  // è¡¨æ ¼é…ç½®
  const table = components.tableArea
  prompt += `## è¡¨æ ¼é…ç½®\n`
  prompt += `- ä¸»æ•°æ®æ¥å£: ${table.apiBindings[0].url}\n`
  prompt += `  - æ•°æ®è·¯å¾„: ${table.apiBindings[0].dataPath}\n`
  prompt += `  - æ€»æ•°è·¯å¾„: ${table.apiBindings[0].totalPath}\n`
  prompt += `- è¡¨æ ¼åˆ—: ${table.columns.length}åˆ—\n\n`
  
  // å…¨å±€æç¤º
  if (globalAiPrompt) {
    prompt += `## å…¨å±€è¯´æ˜\n${globalAiPrompt}\n\n`
  }
  
  // ç”Ÿæˆè¦æ±‚
  prompt += `## ç”Ÿæˆè¦æ±‚\n`
  prompt += `è¯·ç”Ÿæˆå®Œæ•´çš„ Vue2 SFC ä»£ç ï¼ŒåŒ…æ‹¬ï¼š\n`
  prompt += `1. template éƒ¨åˆ†: ä½¿ç”¨ h-page-search åŒ…è£¹æœç´¢åŒºï¼ŒæŒ‰ order æ’åºç»„ä»¶\n`
  prompt += `2. script éƒ¨åˆ†: å®ç°æ‰€æœ‰æ¥å£è°ƒç”¨ã€æ•°æ®è½¬æ¢ã€äº‹ä»¶å¤„ç†\n`
  prompt += `3. ç‰¹åˆ«æ³¨æ„ç»„ä»¶é—´çš„ä¾èµ–å…³ç³»å’Œæ•°æ®è½¬æ¢\n`
  
  return prompt
}
```

### 6.5 ä»£ç ç”Ÿæˆæµç¨‹

```javascript
async function generateCode(config) {
  try {
    // 1. æ„é€  Prompt
    const prompt = buildPrompt(config)
    
    // 2. è°ƒç”¨ AI
    const aiResponse = await aiProvider.chat({
      model: 'gpt-4',
      messages: [
        { role: 'system', content: 'ä½ æ˜¯ä»£ç ç”Ÿæˆä¸“å®¶' },
        { role: 'user', content: prompt }
      ],
      temperature: 0.2
    })
    
    let code = aiResponse.choices[0].message.content
    
    // 3. æå–ä»£ç å—ï¼ˆå»é™¤ markdown æ ‡è®°ï¼‰
    code = extractCodeBlock(code)
    
    // 4. æ ¼å¼åŒ–ä»£ç 
    code = await prettier.format(code, {
      parser: 'vue',
      singleQuote: true,
      semi: false
    })
    
    // 5. æ ¡éªŒä»£ç 
    const validation = validateCode(code)
    if (!validation.valid) {
      throw new Error(`ä»£ç æ ¡éªŒå¤±è´¥: ${validation.errors.join(', ')}`)
    }
    
    return {
      success: true,
      code,
      validation
    }
  } catch (error) {
    console.error('AI ç”Ÿæˆå¤±è´¥ï¼Œå°è¯•é™çº§åˆ°æ¨¡æ¿æ¸²æŸ“', error)
    
    // é™çº§åˆ° Handlebars æ¨¡æ¿
    const code = fallbackToTemplate(config)
    return {
      success: true,
      code,
      fallback: true
    }
  }
}
```

---

## 7. å¼€å‘æŒ‡å—

### 7.1 ç¯å¢ƒæ­å»º

```bash
# å…‹éš†é¡¹ç›®
git clone <repository-url>
cd ai-code

# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

# è¿è¡Œæµ‹è¯•
npm test
```

### 7.2 æ·»åŠ æ–°æ¨¡æ¿

1. åœ¨ `templates/` ç›®å½•ä¸‹åˆ›å»ºæ–°æ–‡ä»¶å¤¹
2. åˆ›å»º `template.json` å®šä¹‰æ¨¡æ¿ç»“æ„
3. åˆ›å»º `README.md` è¯´æ˜æ–‡æ¡£
4. ï¼ˆå¯é€‰ï¼‰åˆ›å»º `preview.png` é¢„è§ˆå›¾

**template.json ç¤ºä¾‹**ï¼š

```json
{
  "id": "left-tree-right-table",
  "name": "å·¦æ ‘å³è¡¨",
  "description": "å·¦ä¾§æ ‘å½¢å¯¼èˆªï¼Œå³ä¾§è¡¨æ ¼åˆ—è¡¨",
  "structure": {
    "root": "h-page-container",
    "slots": {
      "default": {
        "component": "el-row",
        "props": { "gutter": 20 },
        "slots": {
          "left": {
            "component": "el-col",
            "props": { "span": 6 },
            "slots": {
              "default": [] // å·¦ä¾§æ ‘å½¢ç»„ä»¶
            }
          },
          "right": {
            "component": "el-col",
            "props": { "span": 18 },
            "slots": {
              "default": [] // å³ä¾§è¡¨æ ¼ç»„ä»¶
            }
          }
        }
      }
    }
  }
}
```

### 7.3 æ·»åŠ æ–°ç»„ä»¶

1. åœ¨ `manifests/hui-components.json` ä¸­æ·»åŠ ç»„ä»¶å…ƒæ•°æ®
2. å®šä¹‰ç»„ä»¶çš„ propsã€eventsã€slots
3. å®šä¹‰ç»„ä»¶çš„é…ç½® Schema

**ç»„ä»¶å…ƒæ•°æ®ç¤ºä¾‹**ï¼š

```json
{
  "name": "el-cascader",
  "label": "çº§è”é€‰æ‹©å™¨",
  "category": "form",
  "icon": "el-icon-menu",
  "configSchema": {
    "props": {
      "prop": { "type": "string", "required": true },
      "label": { "type": "string", "required": true },
      "placeholder": { "type": "string", "default": "è¯·é€‰æ‹©" },
      "clearable": { "type": "boolean", "default": true },
      "filterable": { "type": "boolean", "default": false }
    },
    "apiBinding": {
      "supports": ["options", "submit"],
      "optionsConfig": {
        "dataPath": { "type": "string", "required": true },
        "labelKey": { "type": "string", "default": "label" },
        "valueKey": { "type": "string", "default": "value" },
        "childrenKey": { "type": "string", "default": "children" }
      }
    }
  }
}
```

### 7.4 è°ƒè¯•æŠ€å·§

**å¼€å‘è€…å·¥å…·**

```javascript
// åœ¨ä¸»åº”ç”¨ä¸­
window.__DEBUG__ = {
  editorStore,
  configManager,
  previewManager,
  codeGenerator
}

// åœ¨æ§åˆ¶å°ä¸­è°ƒè¯•
__DEBUG__.editorStore.$state
__DEBUG__.configManager.exportConfig()
```

**iframe è°ƒè¯•**

```javascript
// åœ¨ iframe ä¸­æ·»åŠ æ—¥å¿—
console.log('[Preview]', 'Component added:', component)

// åœ¨ä¸»åº”ç”¨ä¸­ç›‘å¬ iframe æ—¥å¿—
window.addEventListener('message', (event) => {
  if (event.data.type === 'log') {
    console.log('[iframe]', ...event.data.args)
  }
})
```

---

## 8. API æ–‡æ¡£

### 8.1 ConfigManager API

#### addComponent(slotPath, component)

æ·»åŠ ç»„ä»¶åˆ°æŒ‡å®š slotã€‚

**å‚æ•°**ï¼š
- `slotPath` (string): slot è·¯å¾„ï¼Œå¦‚ `h-page-search.default`
- `component` (object): ç»„ä»¶é…ç½®å¯¹è±¡

**è¿”å›**ï¼š
- (string): ç»„ä»¶ ID

**ç¤ºä¾‹**ï¼š

```javascript
const componentId = configManager.addComponent('h-page-search.default', {
  component: 'el-input',
  wrapper: 'h-page-search-item',
  props: {
    prop: 'userName',
    label: 'ç”¨æˆ·å',
    clearable: true
  }
})
```

#### updateComponent(componentId, config)

æ›´æ–°ç»„ä»¶é…ç½®ã€‚

**å‚æ•°**ï¼š
- `componentId` (string): ç»„ä»¶ ID
- `config` (object): æ–°çš„é…ç½®å¯¹è±¡ï¼ˆä¼šä¸æ—§é…ç½®åˆå¹¶ï¼‰

**ç¤ºä¾‹**ï¼š

```javascript
configManager.updateComponent('comp_001', {
  props: {
    label: 'ç”¨æˆ·å§“å' // åªæ›´æ–° label
  }
})
```

#### addApiBinding(componentId, apiBinding)

ä¸ºç»„ä»¶æ·»åŠ æ¥å£ç»‘å®šã€‚

**å‚æ•°**ï¼š
- `componentId` (string): ç»„ä»¶ ID
- `apiBinding` (object): æ¥å£ç»‘å®šé…ç½®

**è¿”å›**ï¼š
- (string): æ¥å£ç»‘å®š ID

**ç¤ºä¾‹**ï¼š

```javascript
const bindingId = configManager.addApiBinding('comp_002', {
  purpose: 'options',
  url: '/api/status-options',
  method: 'GET',
  trigger: 'onMounted',
  dataPath: 'data.items',
  mapping: {
    label: 'statusName',
    value: 'statusCode'
  }
})
```

### 8.2 PreviewManager API

#### updatePreview(config)

æ›´æ–° iframe é¢„è§ˆã€‚

**å‚æ•°**ï¼š
- `config` (object): å®Œæ•´é…ç½®å¯¹è±¡

**ç¤ºä¾‹**ï¼š

```javascript
previewManager.updatePreview({
  template: templateConfig,
  components: componentsConfig
})
```

#### highlightSlot(slotPath)

é«˜äº®æ˜¾ç¤ºæŒ‡å®šçš„ slot åŒºåŸŸã€‚

**å‚æ•°**ï¼š
- `slotPath` (string): slot è·¯å¾„

**ç¤ºä¾‹**ï¼š

```javascript
previewManager.highlightSlot('h-page-search.default')
```

### 8.3 CodeGenerator API

#### generateCode(config)

ç”Ÿæˆ Vue2 SFC ä»£ç ã€‚

**å‚æ•°**ï¼š
- `config` (object): å®Œæ•´é…ç½®å¯¹è±¡

**è¿”å›**ï¼š
- (Promise<object>): ç”Ÿæˆç»“æœ
  - `success` (boolean): æ˜¯å¦æˆåŠŸ
  - `code` (string): ç”Ÿæˆçš„ä»£ç 
  - `validation` (object): æ ¡éªŒç»“æœ
  - `fallback` (boolean): æ˜¯å¦ä½¿ç”¨äº†é™çº§æ–¹æ¡ˆ

**ç¤ºä¾‹**ï¼š

```javascript
const result = await codeGenerator.generateCode(config)
if (result.success) {
  console.log('ç”Ÿæˆçš„ä»£ç :', result.code)
  if (result.fallback) {
    console.warn('ä½¿ç”¨äº†é™çº§æ–¹æ¡ˆï¼ˆæ¨¡æ¿æ¸²æŸ“ï¼‰')
  }
} else {
  console.error('ç”Ÿæˆå¤±è´¥:', result.error)
}
```

---

## é™„å½•

### A. å¸¸è§é—®é¢˜

**Q: å¦‚ä½•å¤„ç†ç»„ä»¶é—´çš„çº§è”å…³ç³»ï¼Ÿ**

A: åœ¨æ¥å£ç»‘å®šä¸­ä½¿ç”¨ `trigger: 'watch:fieldName'` å’Œ `params` é…ç½®ä¾èµ–å…³ç³»ï¼ŒAI ä¼šè‡ªåŠ¨ç”Ÿæˆ watch ä»£ç ã€‚

**Q: å¦‚ä½•æ”¯æŒè‡ªå®šä¹‰ç»„ä»¶ï¼Ÿ**

A: è°ƒç”¨ `componentLibrary.registerCustomComponent()` æ³¨å†Œç»„ä»¶ï¼Œæä¾›ç»„ä»¶çš„å…ƒæ•°æ®å’Œé…ç½® Schemaã€‚

**Q: AI ç”Ÿæˆå¤±è´¥æ€ä¹ˆåŠï¼Ÿ**

A: ç³»ç»Ÿä¼šè‡ªåŠ¨é™çº§åˆ° Handlebars æ¨¡æ¿æ¸²æŸ“ï¼Œä¿è¯åŸºç¡€åŠŸèƒ½å¯ç”¨ã€‚

### B. æ€§èƒ½ä¼˜åŒ–å»ºè®®

1. **é…ç½®åŒæ­¥é˜²æŠ–**ï¼šä½¿ç”¨ debounce å‡å°‘ iframe æ›´æ–°é¢‘ç‡
2. **ç»„ä»¶æ‡’åŠ è½½**ï¼šæŒ‰éœ€åŠ è½½ç»„ä»¶åº“ä¸­çš„ç»„ä»¶
3. **é¢„è§ˆç¼“å­˜**ï¼šç¼“å­˜å·²æ¸²æŸ“çš„é¢„è§ˆç»“æœ
4. **å¢é‡æ›´æ–°**ï¼šåªæ›´æ–°å˜åŒ–çš„éƒ¨åˆ†ï¼Œè€Œä¸æ˜¯æ•´ä½“é‡æ–°æ¸²æŸ“

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0  
**æœ€åæ›´æ–°**: 2025-10-31  
**ç»´æŠ¤è€…**: å¼€å‘å›¢é˜Ÿ

