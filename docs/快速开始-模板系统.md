# 快速开始：模板系统

## 🎯 核心概念

**现在预览系统根据模板配置动态渲染，不再硬编码！**

### 工作原理

```
用户选择模板 → 加载 previewLayout → 动态渲染布局 → 插入拖拽的组件
```

---

## 📝 使用流程

### 1. 选择模板

在编辑器左侧选择一个模板（如"标准列表页"）

### 2. 拖拽组件

从组件库拖拽组件到预览区的不同 drop zone：
- **搜索区** - 拖拽 el-input, el-select 等
- **表格区** - 拖拽操作按钮

### 3. 配置组件

在右侧配置面板调整：
- ✅ **Wrapper 选择** - 选择包裹容器（h-page-search-item、el-form-item 等）
- ✅ **基础属性** - 字段名、标签、占位符等
- ✅ **接口绑定** - 配置 API 调用

### 4. 切换模板

随时切换模板，预览布局会立即更新！

---

## 🔍 验证效果

打开浏览器控制台，查看：

```javascript
// 当前模板布局
app.templateLayout

// 输出示例：
{
  root: {
    component: "h-page-container",
    children: [...]
  }
}
```

**切换模板后，这个对象会变化，布局也会跟着变！**

---

## 🎨 Wrapper 功能

### 什么是 Wrapper？

Wrapper 是包裹组件的容器，例如：

```html
<h-page-search-item label="用户名" prop="username">
  <el-input placeholder="请输入" />
</h-page-search-item>
```

- `h-page-search-item` 是 wrapper
- `el-input` 是实际组件

### 如何使用？

1. 拖拽组件后，组件会使用默认 wrapper
2. 在配置面板的"包裹容器"区块选择其他 wrapper
3. 也可以清空，不使用 wrapper

### 可用的 Wrapper

- `h-page-search-item` - 搜索项包裹器（推荐用于搜索区）
- `el-form-item` - 表单项包裹器
- `div` - 普通容器

---

## ⚡ 快速测试

### 测试步骤

1. **启动项目**
   ```bash
   npm run dev
   ```

2. **打开浏览器**
   访问 `http://localhost:5173`

3. **选择模板**
   选择"标准列表页"

4. **拖拽组件**
   - 拖拽"输入框"到搜索区
   - 拖拽"下拉选择"到搜索区
   - 拖拽"按钮"到表格区

5. **修改配置**
   - 点击搜索区的输入框
   - 在右侧修改 wrapper为 `el-form-item`
   - 观察预览变化

6. **切换模板**
   - 选择其他模板（如果有）
   - 观察布局结构变化

---

## 🐛 常见问题

### Q: 切换模板后布局没变化？

A: 检查：
1. 模板的 `template.json` 中是否定义了 `previewLayout`
2. 浏览器控制台是否有错误
3. `app.templateLayout` 是否有值

### Q: 拖拽组件后看不到？

A: 检查：
1. 组件是否被添加到 `config.components` 中
2. Drop zone 的 slots 映射是否正确
3. Wrapper 组件是否正确注册

### Q: Wrapper 修改后没效果？

A: 确保：
1. Wrapper 组件已在 Vue 中注册
2. `wrapperProps` 配置正确
3. 刷新预览 iframe

---

## 📚 下一步

- 查看 [预览系统架构说明](./预览系统架构说明.md) 了解技术细节
- 阅读 [templates/README.md](../templates/README.md) 学习如何创建新模板
- 参考 [standard-list/README.md](../templates/standard-list/README.md) 了解模板结构

---

## 💡 提示

✨ **关键优势**：
- ✅ 真正的模板系统（不同模板不同布局）
- ✅ 灵活的 Wrapper 配置
- ✅ 实时预览
- ✅ 可扩展的架构

🎉 **现在开始构建你的页面吧！**

